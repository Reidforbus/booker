<!doctype html>
{% extends "layout.html" %}
{% block title %}Calendar{% endblock %}
{% block content %}
<div id="content">
    {% include "weeknav.html" %}
    <div id="calendar">
        {% for day in days %}
        <div class="day">
            <div>
                {{ day.weekday }}<br>
                {{ day.date.strftime("%d.%m.") }}
                <hr>
            </div>
            <div class="open">
                {% if day.open %}
                <p>Open: {{ day.open.strftime("%H:%M") }}</p>
                {% elif day.past == True %}
                <p>Closed for the day<p>
                {% else %}
                <p><a href="hours?date={{ day.date.isoformat() }}">Set hours</a><p>
                {% endif %}
            </div>
            <div class="slots">
                {% if day.slots == [] %}
                <div>
                    <p>No bookings yet</p>
                </div>
                {% else %}
                {% for (booking, end) in day.slots %}
                <a href="/bookings/{{booking.booking_id}}/" class="booking">
                    <div>
                        <div>{{ booking.time.strftime("%H:%M") }}</div>
                        <div>{{ end.strftime("%H:%M")}}</div>
                    </div>
                    <div>
                        <div>{{ booking.service }}</div>
                        <div>{{ booking.name }}</div>
                    </div>
                </a>
                {% endfor %}
                {% endif  %}
            </div>
            <div class="close">
                {% if day.close %}
                Close: {{ day.close.strftime("%H:%M") }}
                {% elif day.past == True %}
                Closed for the day
                {% else %}
                Opening hours not set yet
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
